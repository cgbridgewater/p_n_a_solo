<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View {{activity.creator.first_name}}'s Activity</title>

    <link rel="apple-touch-icon" sizes="180x180" href="../static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../static/favicon/favicon-16x16.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/menu.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/buttons.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/one_view.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/page_header.css') }}">
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">

</head>
<body>
    <!-- main wrapper -->
    <main>
        <!-- logo bar -->
        <header>
            <h1 class="header_text">Get OUTSIDE</h1>
        </header>
        <!-- menu button -->
        <a class="menu_trigger" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
            MENU &nbsp; <i class="fas fa-caret-square-down"></i>
        </a>
        <!-- end menu button -->
        <!-- menu popout -->
        <div class="offcanvas  offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
            <a class="menu_close" data-bs-dismiss="offcanvas" aria-label="Close"><i class="button_menu_close fas fa-caret-square-down fa-rotate-90 fa-2xl"></i></a>
            <ul class="menu__box">
                <li><a class="menu__item" href="/getoutside/activities">Activities</a></li>
                <li><a class="menu__item" href="/getoutside/myprofile">My Profile</a></li>
                <li><a class="menu__item" href="/getoutside/friends">Find Friends</a></li>
                <li><a class="menu__item" href="/logout">Log Out</a></li>
            </ul>
        </div>
        <!-- end menu popout -->
            <!-- page title -->
        <div class="user">
            <h1 class="text_green mt-2">Get OUTSIDE with {{activity.creator.first_name.title()}} and go {{activity.activity}}!</h1>
        </div>
        <!-- Activities Container -->
        <div class="activity_container">
            <!-- Right Box -->
            <div class="right_box">
                <!-- top of details box -->
                <div class="top">
                    <!-- title and button-->
                    <div class="flex">
                        <h4 class="text_green">Details</h4>
                        <div class="buttons">
                            <a class="button green" href="/getoutside/activities" role="button">ACTIVITIES</a>
                            <a class="button blue" href="/getoutside/myprofile" role="button">PROFILE</a>
                            {% if activity.creator.id == session.user_id %}
                            <a class="button grey" href="/getoutside/activity/{{activity.id}}/edit" role="button">EDIT</a>
                            <a class="button brown" href="/getoutside/activity/{{activity.id}}/delete" role="button">DELETE</a>
                            {% endif %}
                        </div>
                    </div>
                    <!-- activity deets -->
                    <p class="text_green"><i class="fas fa-info-circle" style="color: #008000;"></i> What I'm Doing: <span class="text_brown">
                        {% if activity.activity == "to the Gym"%}
                            Gym Session
                        {% else %}
                            {{activity.activity}}
                        {% endif %}
                    </span></p>
                    <p class="text_green"><i class="far fa-calendar-alt" style="color: #008000;"></i> When: <span class="text_brown">{{activity.date.strftime("%B %e, %Y")}}</span></p>
                    <p class="text_green"><i class="fas fa-map-marked-alt" style="color: #008000;"></i> Where: <span class="text_brown">{{activity.location.title()}}</span></p>
                    <!-- end activity deets -->
                </div>
                <!-- end top of details box --> 
                <!-- bottom of details section -->
                <div class="bottom">
                    <!-- image container of all images by sport -->
                    <div class="image_box"> 
                        <!-- Activities image Container -->
                        {% if activity.activity == "to the Gym" %}
                        <img class="image" src="https://live.staticflickr.com/65535/53261382110_eb6a3253dd.jpg" alt="Gym">

                        {% elif activity.activity == "Climbing" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822743399_b4892e348c_z.jpg" alt="Climbing">
                        
                        {% elif activity.activity == "Cycling" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52823001593_5cc04c8c73.jpg" alt="Cycling">
                        
                        {% elif activity.activity == "Mtn. Biking" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52823001058_1c534afa53_z.jpg" alt="Mtn. Biking">
                        
                        {% elif activity.activity == "Disc Golfing" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52823097098_9a373cb198_c.jpg" alt="Disc Golfing">
                        
                        {% elif activity.activity == "Golfing" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822564031_4d49b144a0.jpg" alt="Golfing">
                        
                        {% elif activity.activity == "Hiking" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822563876_f75e7ae2b3.jpg" alt="Hiking">
                        
                        {% elif activity.activity == "Paddling" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822563616_472ae35218.jpg" alt="Paddling">
                        
                        {% elif activity.activity == "Rowing" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822564216_e18d1cfea7_z.jpg" alt="Rowing">
                        
                        {% elif activity.activity == "Running" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822659246_8ee3feab56.jpg" alt="Running">
                        
                        {% elif activity.activity == "Skiing" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822971610_812ee173a3_w.jpg" alt="Skiing">
                        
                        {% elif activity.activity == "Snowboarding" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52823382403_1e4f00cf28_w.jpg" alt="Snowboarding">
                        
                        {% elif activity.activity == "Snowshoeing" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822563371_b35e821a4d_z.jpg" alt="SnowShoeing">
                        
                        {% elif activity.activity == "Swimming" %}
                        <img class="image" src="https://live.staticflickr.com/65535/52822742544_2ebc44751f.jpg" alt="Swimming">
                        {% endif %}
                    <!-- END Activities image Container -->
                    </div>
                    <!-- google MAP -->
                    <iframe
                        style="border:2px solid green"
                        loading="lazy"
                        allowfullscreen
                        referrerpolicy="no-referrer-when-downgrade"
                        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBaBIHsgFp640ZtHCw1l2j7SxP4nVPSFLE
                        &q={{activity.location}} ">
                    </iframe>
                    <!-- end google MAP -->
                </div>
                <!-- end bottom of details section -->
            </div>
            <!-- end Left box -->
            <!-- Right Box -->
            <div class="left_box">
                <!-- title and button -->
                <div class="flex">
                    <h4 class="text_green">Who's going:</h4> 
                    <!-- if attenders list is empty make a join button -->
                    {% for attendee in activity.attenders if session.user_id == attendee.id and session.user_id != activity.creator.id -%}
                        {% else %}
                            {% if activity.creator.id != session.user_id %}
                                <a class="button green" href="/getoutside/activity/{{activity.id}}/join2" role="button">I'M IN!</a>
                            {%endif%}
                    {%- endfor %}        
                </div>
                <!-- list of attendees -->
                <div class="activity_links">
                {% for attendee in activity.attenders %}
                    {% if attendee.id == session.user_id %}
                    <div class="flex">
                        <h5 class="text_green">{{attendee.first_name.capitalize()}} {{attendee.last_name.capitalize()}}</h5>
                        <a class="unjoin_button"  href="/getoutside/activity/{{activity.id}}/unjoin"><i class="fa-solid fa-square-xmark fa-xl"></i></a>
                    </div>
                    {% else %}
                        {% if attendee.first_name == None %}
                        {%else%}
                            <h5>
                                <a class="text_green2" href="/getoutside/athlete/{{attendee.id}}"> {{attendee.first_name.capitalize()}} {{attendee.last_name.capitalize()}} </a>
                            </h5>    
                        {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
                <!-- end list of attendees -->
                <hr class="spacer">
                <!-- comment section -->
                <div id="comments" class="comments">
                    <!-- validation error return -->
                    {% with messages = get_flashed_messages(category_filter=["comment"]) %}
                        <!-- declare a variable called messages -->
                        {% if messages %}
                            <!-- check if there are any messages -->
                            {% for message in messages %}
                            <!-- loop through the messages -->
                            <!-- <p class="error">{{message}}</p>  -->
                            <h4 class="text_green">Comments: <span class="error">{{message}}</span></h4> <!-- display each message in a paragraph tag -->
                            {% endfor %}
                        {% else %}
                            
                            <h4 class="text_green">Comments: </h4> 
                        {% endif %}
                    {% endwith %}
                    <!-- comment form -->
                    <form action="/getoutside/activities/{{activity.id}}/comment" method="POST">
                        <div class="form_control">
                            <input class="input form-control shadow-none" type="text" name="text" placeholder="Add Comment">
                            <input type="hidden" name="commenter" value="{{user.first_name.capitalize()}} {{user.last_name.capitalize()}}">
                            <input type="hidden" name="activity_id" value="activity.id">
                            <button class="button green" type="submit">COMMENT</button>
                        </div>
                    </form>
                    <!-- comment results -->
                    <div class="activity_links">
                        {% for comment in comments %}
                        <h6 class="comment_text">{{comment.text.capitalize()}}</h6>
                        <h6 class="commenter_data">{{comment.commenter}} on {{comment.created_at.strftime("%B %e, %Y")}}</h6>
                        <hr class="spacer2">
                        {% endfor %}
                    </div>
                </div>
                <!-- comment section -->
            </div>
            <!-- End Right Box -->
        </div>
        <!-- end activities container -->
    </main>
<!-- End Main -->
<script src="https://kit.fontawesome.com/83a0001255.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>